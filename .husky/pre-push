echo "Running pre-push checks..."

# Type check (frontend + server in parallel)
echo "Running type checks..."
npm run type-check &
PID_FE=$!
(cd server && npm run type-check) &
PID_BE=$!

wait $PID_FE || exit 1
wait $PID_BE || exit 1

# Unit tests (frontend + server in parallel)
echo "Running tests..."
npm test &
PID_FE_TEST=$!
(cd server && npm test) &
PID_BE_TEST=$!

wait $PID_FE_TEST || exit 1
wait $PID_BE_TEST || exit 1

echo "All pre-push checks passed!"
