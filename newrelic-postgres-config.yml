integrations:
  - name: nri-postgresql
    env:
      # PostgreSQL connection details
      HOSTNAME: db
      PORT: 5432
      USERNAME: ${POSTGRES_USER}
      PASSWORD: ${POSTGRES_PASSWORD}
      DATABASE: ${POSTGRES_DB}

      ENABLE_SSL: false
      TRUST_SERVER_CERTIFICATE: true  # Internal Docker network

      COLLECT_DB_LOCK_METRICS: true
      COLLECT_BLOAT_METRICS: true  # Monitors table/index bloat

      TIMEOUT: 10
    interval: 15s
    labels:
      env: production
      role: database
    inventory_source: config/postgresql
