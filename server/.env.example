# TMDB API Token (required)
# Get yours at https://www.themoviedb.org/settings/api
TMDB_API_TOKEN=your_tmdb_api_token_here

# Anthropic API Key (required for accurate cause of death lookups)
# Get yours at https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# =============================================================================
# Ratings & Popularity Data Sources (all optional)
# =============================================================================
# These API keys enable ratings and popularity metrics from third-party sources.

# OMDb API - IMDb ratings, Rotten Tomatoes, Metacritic scores
# Quality: High - authoritative ratings data from major aggregators
# Cost: $1/month for 100,000 requests (0.001 cents per request)
# Coverage: Movies, TV shows, and episodes (requires IMDb IDs)
# Get yours at http://www.omdbapi.com/apikey.aspx
# OMDB_API_KEY=

# Trakt.tv API - Trending data, user ratings, and watch statistics
# Quality: High - community-driven ratings and trending metrics
# Cost: Free with registration
# Coverage: Movies and TV shows (movies use IMDb IDs, shows use TheTVDB IDs)
# Get yours at https://trakt.tv/oauth/applications
# TRAKT_API_KEY=

# Server port (optional, defaults to 8080)
PORT=8080

# PostgreSQL connection string (optional for local dev, required for Docker)
# For Docker Compose, this is set automatically
# DATABASE_URL=postgresql://deadonfilm:deadonfilm@localhost:5432/deadonfilm

# Redis connection (optional - caching disabled if not set)
# For Docker Compose, this is set automatically
# REDIS_URL=redis://localhost:6379

# =============================================================================
# Logging (optional - defaults to stdout only in production)
# =============================================================================
# LOG_LEVEL=info              # Log level: fatal, error, warn, info, debug, trace
# LOG_TO_FILE=true            # Enable file logging (in addition to stdout)
# LOG_FILE_PATH=/var/log/deadonfilm/app.log  # Path to log file

# =============================================================================
# New Relic APM (optional - monitoring disabled if not set)
# =============================================================================
# New Relic Application Performance Monitoring
# Get your license key at https://one.newrelic.com/launcher/api-keys-ui.api-keys-launcher
# Free tier: 100GB logs/month, full APM features
# NEW_RELIC_LICENSE_KEY=your_license_key_here
# NEW_RELIC_APP_NAME=Dead on Film
# NEW_RELIC_LOG_LEVEL=warn

# =============================================================================
# Death Information Sources (all optional)
# =============================================================================
# These API keys enable additional data sources for actor death information.
# The enrichment system works without them but will have fewer sources to query.

# --- AI Providers (ordered by cost, cheapest first) ---

# Google AI (Gemini) - ~$0.0001/query (cheapest)
# Get yours at https://makersuite.google.com/app/apikey
# GOOGLE_AI_API_KEY=

# Groq (Llama) - ~$0.0002/query (fast Llama inference)
# Get yours at https://console.groq.com/keys
# GROQ_API_KEY=

# OpenAI (GPT-4o Mini & GPT-4o) - ~$0.0003-$0.01/query
# Get yours at https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-...

# DeepSeek - ~$0.0005/query
# Get yours at https://platform.deepseek.com/api_keys
# DEEPSEEK_API_KEY=

# Mistral - ~$0.001/query (European training data)
# Get yours at https://console.mistral.ai/api-keys
# MISTRAL_API_KEY=

# Perplexity - ~$0.005/query (has web search!)
# Get yours at https://www.perplexity.ai/settings/api
# PERPLEXITY_API_KEY=pplx-...

# xAI (Grok) - ~$0.005/query (has X/Twitter data!)
# Get yours at https://console.x.ai/
# XAI_API_KEY=

# --- Search Engines ---

# Brave Search - Web search engine
# Free tier: 2,000 queries/month
# Paid: $5 per 1,000 queries ($0.005/query)
# Get yours at https://brave.com/search/api/
# BRAVE_SEARCH_API_KEY=

# --- News Sources ---

# NewsAPI - News aggregator (80,000+ sources)
# Free tier: 100 requests/day (450 in development)
# Get yours at https://newsapi.org/register
# NEWSAPI_KEY=

# --- Historical Archives ---

# Trove (National Library of Australia) - Australian newspaper archives
# Free API key required
# Get yours at https://trove.nla.gov.au/about/create-something/using-api
# TROVE_API_KEY=

# Europeana - European digital archives
# Free API key required
# Get yours at https://pro.europeana.eu/page/get-api
# EUROPEANA_API_KEY=

# =============================================================================
# Browser Fetching (for bot-protected sites like NYTimes, WashPost)
# =============================================================================
# Many major news sites block regular HTTP requests with bot detection.
# Browser fetching uses Playwright to render pages like a real browser,
# bypassing these blocks to access obituaries and death-related articles.
#
# PROTECTED SITES (browser used automatically):
#   - nytimes.com        - New York Times
#   - washingtonpost.com - Washington Post
#   - wsj.com            - Wall Street Journal
#   - latimes.com        - Los Angeles Times
#   - bostonglobe.com    - Boston Globe
#   - ft.com             - Financial Times
#   - economist.com      - The Economist
#   - bloomberg.com      - Bloomberg
#
# SETUP (one-time):
#   1. Install Playwright browsers:
#      cd server && npx playwright install chromium
#
#   2. That's it! No API keys needed - browser fetching is free.
#
# HOW IT WORKS:
#   - When following links from search results, if the domain is in the
#     protected list above, Playwright launches a headless browser
#   - If a regular fetch returns 403/blocked, it automatically retries
#     with the browser
#   - Browser instance is shared and auto-closes after 60s idle
#
# LIMITATIONS:
#   - No login support: Can't access paywalled/subscriber-only content
#   - No cookie persistence: Each session starts fresh
#   - Most obituaries are free: Usually works for death-related articles
#
# TROUBLESHOOTING:
#   - "Browser not found": Run `npx playwright install chromium`
#   - "Executable not found": Set BROWSER_EXECUTABLE_PATH to your Chrome
#   - Still blocked: Site may require login (not supported)
#   - Slow fetches: Browser rendering takes 2-5 seconds per page

# Enable browser-based fetching (default: true)
# Set to false to disable browser fallback entirely
# BROWSER_FETCH_ENABLED=true

# Run browser in headless mode (default: true)
# Set to false for debugging to see the browser window
# BROWSER_FETCH_HEADLESS=true

# Path to browser executable (optional)
# By default, uses the Playwright-installed Chromium
# Set this if you want to use a different Chrome/Chromium installation
# BROWSER_EXECUTABLE_PATH=/path/to/chrome

# =============================================================================
# Browser Authentication (for paywalled sites)
# =============================================================================
# Login automation for sites that require subscriptions.
# Use your personal credentials for sites you have subscriptions to.
#
# FEATURES:
#   - Automatic login to paywalled sites (NYTimes, WashPost)
#   - Session persistence (cookies saved to ~/.deadonfilm/sessions/)
#   - CAPTCHA solving integration (optional, costs ~$0.003/solve)
#   - Automatic session refresh when expired
#
# SECURITY:
#   - Credentials are ONLY stored in environment variables (never on disk)
#   - Session cookies are stored locally and expire after 24 hours
#   - Add ~/.deadonfilm/sessions/ to .gitignore if running from repo root
#
# SETUP:
#   1. Set BROWSER_AUTH_ENABLED=true
#   2. Add credentials for sites you subscribe to
#   3. (Optional) Configure CAPTCHA solver for sites with CAPTCHA protection
#
# NOTE: Only use with sites you have legitimate subscriptions to.

# Master switch for browser authentication (default: false)
# Set to true to enable login automation for paywalled sites
# BROWSER_AUTH_ENABLED=false

# Session storage path (default: ~/.deadonfilm/sessions/)
# BROWSER_AUTH_SESSION_PATH=~/.deadonfilm/sessions

# Session TTL in hours (default: 24)
# After this time, a new login will be performed
# BROWSER_AUTH_SESSION_TTL_HOURS=24

# --- Site Credentials ---

# New York Times - https://www.nytimes.com
# For obituaries and death-related articles
# Supports both naming conventions:
# NYTIMES_AUTH_EMAIL=your-email@example.com
# NYTIMES_AUTH_PASSWORD=your-password
# -- or --
# NYTIMES_EMAIL=your-email@example.com
# NYTIMES_PASSWORD=your-password

# Washington Post - https://www.washingtonpost.com
# For obituaries and death-related articles
# Supports both naming conventions:
# WASHPOST_AUTH_EMAIL=your-email@example.com
# WASHPOST_AUTH_PASSWORD=your-password
# -- or --
# WAPO_EMAIL=your-email@example.com
# WAPO_PASSWORD=your-password

# =============================================================================
# CAPTCHA Solving (optional)
# =============================================================================
# Some sites use CAPTCHA protection during login.
# Configure a solving service to handle these automatically.
#
# SUPPORTED SERVICES:
#   - 2captcha (https://2captcha.com) - ~$0.003/solve
#   - CapSolver (https://capsolver.com) - ~$0.003/solve
#
# COST CONTROL:
#   - Set CAPTCHA_MAX_COST to limit spending per solve
#   - Monitor balance with: npx tsx scripts/check-captcha-balance.ts

# CAPTCHA solver provider: "2captcha" or "capsolver"
# CAPTCHA_SOLVER_PROVIDER=2captcha

# 2Captcha API Key
# Get yours at https://2captcha.com (requires account with balance)
# TWOCAPTCHA_API_KEY=your-api-key

# CapSolver API Key
# Get yours at https://capsolver.com (requires account with balance)
# CAPSOLVER_API_KEY=your-api-key

# CAPTCHA solving timeout in milliseconds (default: 120000 = 2 minutes)
# CAPTCHA_TIMEOUT_MS=120000

# Maximum cost per CAPTCHA solve in USD (default: 0.01)
# Solves that would exceed this cost will be skipped
# CAPTCHA_MAX_COST=0.01

# =============================================================================
# Google Search Console API (optional - enables SEO monitoring dashboard)
# =============================================================================
# Integrates GSC data into the admin analytics dashboard for tracking
# search performance, indexing health, and keyword rankings.
#
# SETUP:
#   1. Go to Google Cloud Console: https://console.cloud.google.com
#   2. Create a project (or use existing)
#   3. Enable the "Search Console API"
#   4. Create a service account under IAM > Service Accounts
#   5. Generate a JSON key for the service account
#   6. In Google Search Console, add the service account email
#      as a user with "Full" permission for your property
#   7. Set the environment variables below
#
# SITE URL FORMAT:
#   - Domain property: "sc-domain:deadonfilm.com"
#   - URL prefix property: "https://deadonfilm.com"
#
# COST: Free (GSC API has no usage charges)
# QUOTAS: 1200 queries/min for search analytics, 2000/day for URL inspection
#
# GSC_SERVICE_ACCOUNT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com
# GSC_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour_private_key_here\n-----END PRIVATE KEY-----\n"
# GSC_SITE_URL=sc-domain:deadonfilm.com
