{
  "name": "dead-on-film-server",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/src/index.js",
  "scripts": {
    "// === Development & Build ===": "",
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node --import newrelic/esm-loader.mjs dist/src/index.js",
    "// === Code Quality ===": "",
    "type-check": "tsc --noEmit",
    "lint": "eslint .",
    "format": "prettier --write \"src/**/*.ts\" \"scripts/**/*.ts\"",
    "format:check": "prettier --check \"src/**/*.ts\" \"scripts/**/*.ts\"",
    "test": "vitest run",
    "test:watch": "vitest",
    "// === Database Migrations ===": "",
    "migrate:up": "node-pg-migrate up",
    "migrate:down": "node-pg-migrate down",
    "migrate:create": "node-pg-migrate create",
    "// === Data Seeding (Initial Population) ===": "",
    "//seed": "Seed deceased actors from top movies by year range",
    "seed": "tsx scripts/seed-deceased-actors.ts",
    "//seed:actuarial": "Required: SSA life tables for curse score calculation",
    "seed:actuarial": "tsx scripts/seed-actuarial-tables.ts",
    "//seed:cohort": "Required: Cohort life expectancy for years-lost calculation",
    "seed:cohort": "tsx scripts/seed-cohort-life-expectancy.ts",
    "seed:movies": "tsx scripts/seed-movies.ts",
    "seed:shows": "tsx scripts/seed-shows.ts",
    "//seed:episodes": "Seed episodes for specific show by TMDB ID",
    "seed:episodes": "tsx scripts/seed-episodes.ts",
    "//seed:episodes:full": "Seed all shows with resume capability",
    "seed:episodes:full": "tsx scripts/seed-episodes-full.ts",
    "seed:filmographies": "tsx scripts/seed-from-filmographies.ts",
    "// === TV Show Import ===": "",
    "//import:shows": "Import shows by phase (popular/standard/obscure)",
    "import:shows": "tsx scripts/import-shows.ts",
    "import:shows:popular": "tsx scripts/import-shows.ts --phase popular --max-shows 500",
    "import:shows:standard": "tsx scripts/import-shows.ts --phase standard --max-shows 2000",
    "import:shows:obscure": "tsx scripts/import-shows.ts --phase obscure --max-shows 5000",
    "//import:shows:all": "Run all phases with auto-resume",
    "import:shows:all": "tsx scripts/import-shows-all.ts",
    "import:stats:shows": "tsx scripts/show-import-stats.ts",
    "verify:shows": "tsx scripts/verify-shows.ts",
    "// === Backfill (Data Enrichment) ===": "",
    "//backfill:mortality": "Calculate expected deaths and curse scores",
    "backfill:mortality": "tsx scripts/backfill-mortality-stats.ts",
    "//backfill:birthdays": "Fill missing birthdays using Claude",
    "backfill:birthdays": "tsx scripts/backfill-birthdays.ts",
    "backfill:appearances": "tsx scripts/backfill-actor-appearances.ts",
    "backfill:profiles": "tsx scripts/backfill-profile-paths.ts",
    "backfill:languages": "tsx scripts/backfill-languages.ts",
    "//backfill:production-countries": "Backfill production_countries for --us-actors-only filter",
    "backfill:production-countries": "tsx scripts/backfill-production-countries.ts",
    "backfill:actor-details": "tsx scripts/backfill-actor-details.ts",
    "backfill:violent-deaths": "tsx scripts/backfill-violent-deaths.ts",
    "//backfill:actor-obscure": "Set is_obscure flag for filtering",
    "backfill:actor-obscure": "tsx scripts/backfill-actor-obscure.ts",
    "//backfill:episodes:fallback": "Backfill episodes from TVmaze/TheTVDB",
    "backfill:episodes:fallback": "tsx scripts/backfill-episodes-fallback.ts",
    "//backfill:documentary-cast": "Backfill cast from IMDB for documentaries/shows with no cast",
    "backfill:documentary-cast": "tsx scripts/backfill-documentary-cast.ts",
    "//backfill:shows:full": "All-in-one TV show backfill with session-wide caching",
    "backfill:shows:full": "tsx scripts/backfill-shows-full.ts",
    "//backfill:external-ids": "Backfill TVmaze/TheTVDB IDs for shows",
    "backfill:external-ids": "tsx scripts/backfill-external-ids.ts",
    "//backfill:cause-of-death-batch": "Backfill cause of death using Claude Opus 4.5 Batch API",
    "backfill:cause-of-death-batch": "tsx scripts/backfill-cause-of-death-batch.ts",
    "//enrich:death-details": "Enrich death details using multi-source fallbacks (free/paid/AI)",
    "enrich:death-details": "tsx scripts/enrich-death-details.ts",
    "//ab-test:sources": "A/B test AI enrichment with/without source requirement ($10 budget)",
    "ab-test:sources": "tsx scripts/ab-test-source-requirement.ts",
    "//ab-test:providers": "DEPRECATED - use ab-test:comprehensive instead (script file removed)",
    "//ab-test:comprehensive": "Comprehensive test: 2 providers Ã— 3 source strategies",
    "ab-test:comprehensive": "tsx scripts/ab-test-comprehensive.ts",
    "//backfill:cause-of-death-runner": "Continuous runner for cause of death batches",
    "backfill:cause-of-death-runner": "tsx scripts/run-cause-of-death-batch.ts",
    "//backfill:cause-capitalization": "Normalize cause_of_death capitalization to sentence case",
    "backfill:cause-capitalization": "tsx scripts/backfill-cause-capitalization.ts",
    "//backfill:sources": "Backfill URL resolution for existing death circumstances",
    "backfill:sources": "tsx scripts/backfill-source-resolution.ts",
    "//backfill:omdb": "Backfill IMDb/Rotten Tomatoes/Metacritic ratings from OMDb API",
    "backfill:omdb": "tsx scripts/backfill-omdb-ratings.ts",
    "//backfill:trakt": "Backfill Trakt.tv user ratings and watch statistics",
    "backfill:trakt": "tsx scripts/backfill-trakt-ratings.ts",
    "//backfill:thetvdb-scores": "Backfill TheTVDB community scores for TV shows",
    "backfill:thetvdb-scores": "tsx scripts/backfill-thetvdb-scores.ts",
    "//backfill:fallback-photos": "Backfill fallback profile photos from Wikidata for actors without TMDB photos",
    "backfill:fallback-photos": "tsx scripts/backfill-actor-fallback-photos.ts",
    "//backfill:movie-imdb-ids": "Backfill IMDb IDs for movies from TMDB (prerequisite for OMDb/Trakt)",
    "backfill:movie-imdb-ids": "tsx scripts/backfill-movie-imdb-ids.ts",
    "//backfill:movie-imdb-ids-dataset": "Backfill IMDb IDs using fuzzy title matching against IMDb dataset",
    "backfill:movie-imdb-ids-dataset": "tsx scripts/backfill-movie-imdb-ids-from-dataset.ts",
    "//backfill:movie-alternate-titles": "Backfill original_title and alternate_titles from TMDB for IMDb matching",
    "backfill:movie-alternate-titles": "tsx scripts/backfill-movie-alternate-titles.ts",
    "//compare:imdb-methods": "Compare OMDB vs IMDb dataset for IMDb ID lookups",
    "compare:imdb-methods": "tsx scripts/compare-imdb-lookup-methods.ts",
    "//backfill:movie-popularity": "Backfill TMDB popularity scores for movies",
    "backfill:movie-popularity": "tsx scripts/backfill-movie-popularity.ts",
    "//backfill:ratings": "Master orchestration script - runs all rating backfills in order",
    "backfill:ratings": "tsx scripts/orchestrate-rating-backfills.ts",
    "//calculate:aggregate-scores": "Calculate weighted aggregate scores from all rating sources",
    "calculate:aggregate-scores": "tsx scripts/calculate-aggregate-scores.ts",
    "// === Monitoring & Reporting ===": "",
    "//report:rating-coverage": "Report rating data coverage across all entities",
    "report:rating-coverage": "tsx scripts/report-rating-coverage.ts",
    "//coverage:snapshot": "Capture death detail coverage snapshot (daily cron job)",
    "coverage:snapshot": "tsx scripts/capture-coverage-snapshot.ts",
    "// === Death Info Management ===": "",
    "//fix:death-info": "Scan and fix suspicious death records",
    "fix:death-info": "tsx scripts/fix-bad-death-info.ts",
    "fix:death-details": "tsx scripts/fix-death-details.ts",
    "refetch:death-details": "tsx scripts/refetch-death-details.ts",
    "verify:death-info": "tsx scripts/verify-death-info.ts",
    "//find:uncertain-deaths": "Find actors with uncertain death data for review (weekly cron)",
    "find:uncertain-deaths": "tsx scripts/find-uncertain-deaths.ts",
    "// === Synchronization ===": "",
    "//sync:tmdb": "Sync with TMDB Changes API (runs every 2h in prod)",
    "sync:tmdb": "node dist/scripts/sync-tmdb-changes.js || tsx scripts/sync-tmdb-changes.ts",
    "//backfill:tmdb": "Batch backfill TMDB sync in 2-day chunks (resumable)",
    "backfill:tmdb": "tsx scripts/backfill-tmdb-batch.ts",
    "//cache:warm": "Pre-warm Redis cache for popular actors (run after deploy)",
    "cache:warm": "tsx scripts/warm-actor-cache.ts",
    "//sitemap:generate": "Generate sitemap.xml (runs daily in prod)",
    "sitemap:generate": "node dist/scripts/sitemap-generate.js || tsx scripts/sitemap-generate.ts",
    "// === Popularity Scoring ===": "",
    "//update:popularity": "Weekly recalculation of DOF popularity scores for all entities",
    "update:popularity": "tsx scripts/scheduled-popularity-update.ts",
    "//backfill:popularity": "Initial backfill of DOF popularity (movies/shows/actors)",
    "backfill:popularity": "tsx scripts/backfill-dof-popularity-direct.ts --all",
    "//backfill:actor-popularity": "Fast actor popularity backfill using SQL aggregation",
    "backfill:actor-popularity": "tsx scripts/backfill-actor-popularity-fast.ts"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.71.1",
    "@bull-board/api": "^6.16.4",
    "@bull-board/express": "^6.16.4",
    "@extra/recaptcha": "^4.2.1-next.587",
    "@resvg/resvg-js": "^2.6.2",
    "bcrypt": "^6.0.0",
    "bullmq": "^5.67.1",
    "commander": "^14.0.2",
    "compression": "^1.8.1",
    "cookie-parser": "^1.4.7",
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^4.21.2",
    "express-rate-limit": "^8.2.1",
    "fast-xml-parser": "^5.3.6",
    "fuse.js": "^7.1.0",
    "googleapis": "^171.4.0",
    "he": "^1.2.0",
    "ini": "^6.0.0",
    "ioredis": "^5.8.2",
    "isbot": "^5.1.33",
    "jsonrepair": "^3.13.2",
    "jsonwebtoken": "^9.0.3",
    "newrelic": "^13.6.6",
    "node-pg-migrate": "^8.0.4",
    "openai": "^6.16.0",
    "pg": "^8.16.3",
    "pino": "^10.1.0",
    "playwright-core": "^1.57.0",
    "playwright-extra": "^4.3.6",
    "recharts": "^3.7.0",
    "satori": "^0.19.2",
    "slugify": "^1.6.6",
    "zod": "^4.3.5"
  },
  "devDependencies": {
    "@electric-sql/pglite": "^0.3.14",
    "@eslint/js": "^9.39.1",
    "@types/bcrypt": "^6.0.0",
    "@types/compression": "^1.8.1",
    "@types/cookie-parser": "^1.4.10",
    "@types/cors": "^2.8.17",
    "@types/express": "^5.0.0",
    "@types/he": "^1.2.3",
    "@types/ini": "^4.1.1",
    "@types/jsonwebtoken": "^9.0.10",
    "@types/newrelic": "^9.14.8",
    "@types/node": "^22.10.1",
    "@types/pg": "^8.15.6",
    "@types/pino": "^7.0.4",
    "@types/supertest": "^6.0.3",
    "@typescript-eslint/eslint-plugin": "^8.48.1",
    "@typescript-eslint/parser": "^8.48.1",
    "eslint": "^9.39.1",
    "eslint-plugin-security": "^3.0.1",
    "globals": "^16.5.0",
    "ioredis-mock": "^8.13.1",
    "pino-pretty": "^13.1.3",
    "prettier": "^3.7.4",
    "supertest": "^7.1.4",
    "tsx": "^4.19.2",
    "typescript": "^5.6.3",
    "typescript-eslint": "^8.48.1",
    "vitest": "^4.0.15",
    "yaml": "^2.8.2"
  }
}
